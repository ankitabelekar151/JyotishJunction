{% comment %} <!DOCTYPE html>
<html>
<head>
    <title>Set New Password</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
        }
        h1 {
            color: #333;
        }
        form {
            max-width: 400px;
            margin: 0 auto;
            padding: 20px;
            background: #fff;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        label {
            display: block;
            margin-bottom: 10px;
            font-weight: bold;
        }
        input[type="password"] {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        #password-error {
            color: red;
            margin-bottom: 20px;
        }
        button[type="submit"] {
            background: #333;
            color: #fff;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
        }
        button[type="submit"]:hover {
            background: #555;
        }
    </style>

    <script>
        $(document).ready(function() {
            // Function to check if passwords match and meet complexity requirements
            function checkPasswords() {
                var newPassword = $("#new_password").val();
                var confirmPassword = $("#confirm_password").val();
                var regex = /^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}$/;

                if (!regex.test(newPassword)) {
                    $("#password-error").text("Password must contain at least 8 characters, including at least one uppercase letter, one lowercase letter, and one numeric digit.");
                    return false;
                } else if (newPassword !== confirmPassword) {
                    $("#password-error").text("Passwords do not match.");
                    return false;
                } else {
                    $("#password-error").text("");
                    return true;
                }
            }
            
            // Attach the function to the form's submit event
            $("form").submit(function() {
                return checkPasswords();
            });
            
            // Attach the function to the "blur" event of the confirm password field
            $("#confirm_password").blur(checkPasswords);
        });
    </script>
</head>
<body>
    <h1>Set New Password</h1>
    <form method="post" action="{% url 'set-new-password' %}">
        {% csrf_token %}
        <input type="hidden" name="user_id" value="{{ user_id }}">
        <label for="new_password">New Password:</label>
        <input type="password" id="new_password" name="new_password" required><br><br>
        <label for="confirm_password">Confirm Password:</label>
        <input type="password" id="confirm_password" name="confirm_password" required><br><br>
        <div id="password-error" style="color: red;"></div>
        <button type="submit">Submit</button>
    </form>
</body>
</html> {% endcomment %}





{% load static %}

<!DOCTYPE html> 
<html lang="en">
	<head>
		
		<meta charset="utf-8">
		<title>Guruji Speaks</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0">
		
		<!-- Favicons -->
		<link href="{% static 'assets/img/favicon.png' %}" rel="icon">
		
		<!-- Bootstrap CSS -->
		<link rel="stylesheet" href="{% static 'assets/css/bootstrap.min.css' %}">
		
		<!-- Fontawesome CSS -->
		<link rel="stylesheet" href="{% static 'assets/plugins/fontawesome/css/fontawesome.min.css' %}">
		<link rel="stylesheet" href="{% static 'assets/plugins/fontawesome/css/all.min.css' %}">

		<!-- Feathericon CSS -->
    	<link rel="stylesheet" href="{% static 'assets/css/feather.css' %}">
		
		<!-- Main CSS -->
		<link rel="stylesheet" href="{% static 'assets/css/custom.css' %}">

		<style>
			.btn-primary {
				background-color: #1c3264;
				border: 1px solid #1c3264;
			}

			.btn-primary:hover {
				background-color: #1c3264;
				border: 1px solid #1c3264;
			}

			.btn-primary:active {
				background-color: #1c3264 !important;
				border: 1px solid #1c3264 !important;
			}

			.bg-img{
				background-image: url("{% static 'assets/img/GrujiSpeaks-img/background_new.png' %}");
				background-repeat: no-repeat;
				background-position: center;
				background-size: cover;
			}
		</style>
	
	</head>
	<body class="bg-img">

		<!-- Main Wrapper -->
		<div class="main-wrapper">
			<!-- Page Content -->
			<div class="content">
				<div class="container">
					<div class="row">						
						<div class="col-md-7 col-lg-8 col-xl-5 m-auto">
							<div class="card">
								<div class="card-body">
									<div class="row">
										<div class="col-md-12 col-lg-12">
										
											<!-- Change Password Form -->
											<form method="post" action="{% url 'set-new-password' %}">
                                                {% csrf_token %}
                                                <input type="hidden" name="user_id" value="{{ user_id }}">
												<div class="form-group">
													<div class="form-group-flex">
														<label>New Password</label>
													</div>
													<div class="pass-group">
														<input type="password" id="new_password" name="new_password" class="form-control pass-input" placeholder="*************">
														<span class="feather-eye toggle-password"></span>
													</div>
												</div>
												<div class="form-group">
													<div class="form-group-flex">
														<label>Confirm Password</label>
													</div>
													<div class="pass-group">
														<input type="password" id="confirm_password" name="confirm_password" class="form-control pass-input-sub" placeholder="*************">
														<span class="feather-eye toggle-password-sub"></span>
													</div>
												</div>
												<div class="submit-section">
													<button type="submit" class="btn btn-primary submit-btn">Save Changes</button>
												</div>
											</form>

											<!-- /Change Password Form -->

                                            <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script> <!-- Include jQuery library -->

                                            <script>
                                            $(document).ready(function() {
                                                var passwordError = $("#password-error"); // Cache the error message element
                                                var newPasswordInput = $("#new_password");
                                                var confirmPasswordInput = $("#confirm_password");

                                                function showError(message) {
                                                    passwordError.text(message).show(); // Show the error message
                                                }

                                                function clearError() {
                                                    passwordError.text("").hide(); // Clear and hide the error message
                                                }

                                                function checkPasswords() {
                                                    clearError();

                                                    var newPassword = newPasswordInput.val();
                                                    var confirmPassword = confirmPasswordInput.val();
                                                    var regex = /^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}$/;

                                                    if (!regex.test(newPassword)) {
                                                        showError("Password must contain at least 8 characters, including at least one uppercase letter, one lowercase letter, and one numeric digit.");
                                                        return false;
                                                    } else if (newPassword !== confirmPassword) {
                                                        showError("Passwords do not match.");
                                                        return false;
                                                    } else {
                                                        return true;
                                                    }
                                                }

                                                $("form").submit(function(event) {
                                                    if (!checkPasswords()) {
                                                        event.preventDefault(); // Prevent form submission if passwords are not valid
                                                    } else {
                                                        // You can replace this alert with your own success message logic
                                                        alert("Password successfully created!");
                                                    }
                                                });

                                                confirmPasswordInput.blur(checkPasswords); // Attach the function to the "blur" event of the confirm password field
                                            });
                                            </script>


											
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>

			</div>		
			<!-- /Page Content -->
   
		</div>
		<!-- /Main Wrapper -->
	  
		<!-- jQuery -->
		<script src="{% static 'assets/js/jquery-3.6.4.min.js' %}"></script>
		
		<!-- Bootstrap Core JS -->
		<script src="{% static 'assets/js/bootstrap.bundle.min.js' %}"></script>
		
		<!-- Sticky Sidebar JS -->
        <script src="{% static 'assets/plugins/theia-sticky-sidebar/ResizeSensor.js' %}"></script>
        <script src="{% static 'assets/plugins/theia-sticky-sidebar/theia-sticky-sidebar.js' %}"></script>
		
		<!-- Custom JS -->
		<script src="{% static 'assets/js/script.js' %}"></script>
		
	</body>
</html>