{% extends 'customer_base.html' %}   {% block content %}
{% load static %}
<!DOCTYPE html> 
<html lang="en">
	<head>  
		
		<meta charset="utf-8">
		<title>Guruji Speaks</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0">


		<!-- <link rel="stylesheet" href="//cdn.tutorialjinni.com/twitter-bootstrap/3.3.7/css/bootstrap.min.css"> -->
		<!-- <link rel="stylesheet" href="//cdn.tutorialjinni.com/bootstrap-select/1.12.4/css/bootstrap-select.min.css"> -->
		<link rel="stylesheet" href="{%static '//g.tutorialjinni.com/mojoaxel/bootstrap-select-country/dist/css/bootstrap-select-country.min.css' %}" />
		
		<!-- Favicons -->
		<link href="{%static 'assets/img/GrujiSpeaks-img/logo-2.png' %}" rel="icon">

		<!-- dd-mm-yyyy -->
		<link rel="stylesheet" href="{%static 'https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css' %}">
		<script src="{%static 'https://cdn.jsdelivr.net/npm/flatpickr' %}"></script>


		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr@4.6.3/dist/flatpickr.min.css">
		<script src="https://cdn.jsdelivr.net/npm/flatpickr@4.6.3/dist/flatpickr.min.js"></script>


		
		
		<!-- Bootstrap CSS -->
		<link rel="stylesheet" href="{%static 'assets/css/bootstrap.min.css' %}">
		
		<!-- Fontawesome CSS -->
		<link rel="stylesheet" href="{%static 'assets/plugins/fontawesome/css/fontawesome.min.css' %}">
		<link rel="stylesheet" href="{%static 'assets/plugins/fontawesome/css/all.min.css' %}">

		<!-- Feathericon CSS -->
    	<link rel="stylesheet" href="{%static 'assets/css/feather.css' %}">
		
		<!-- Datetimepicker CSS -->
		<link rel="stylesheet" href="{%static 'assets/css/bootstrap-datetimepicker.min.css' %}">
		
		<!-- Select2 CSS -->
		<link rel="stylesheet" href="{%static 'assets/plugins/select2/css/select2.min.css' %}">
		
		<!-- Main CSS -->
		<link rel="stylesheet" href="{%static 'assets/css/custom.css' %}">

		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
		<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>


	</head>

	<style>
		/* save changes button */
		.btn-primary {
			background-color: #1c3264;
			border: 1px solid #1c3264;
		}

		
		.profile-sidebar .dashboard-menu > ul > li.active > a {
			color: #1c3264;
		}

		.content {
			min-height: 200px;
			padding: 30px 0 60px;
		}

		 .breadcrumb-bar-two .inner-banner {
          margin: 0;
          padding: 40px 0;
      	}

      	.breadcrumb-bar-two {
		    background: #F2F6F6;
			/* background-image: url("{% static 'assets/img/backg_img1.jpeg' %}"); */
		    background-repeat: no-repeat;
			background-position: center;
			background-size: cover;
		    padding-top: 10px;
		    min-height: 100px;
		    position: relative;
		    overflow: hidden;
		    z-index: 1;
		}
	</style>
	

	<body>

		<!-- Main Wrapper -->
		<div class="main-wrapper">
			<!-- <img src="{% static 'assets/img/backg_img1.jpeg' %}"> -->

			<!-- Breadcrumb -->
			<div class="breadcrumb-bar-two">
				<div class="container">
					<div class="row align-items-center inner-banner">
						<div class="col-md-12 col-12 text-center">
							<h2 class="breadcrumb-title">Profile Settings</h2>
							<nav aria-label="breadcrumb" class="page-breadcrumb">
								<ol class="breadcrumb">
									<li class="breadcrumb-item"><a href="/after_login_cus/">Home</a></li>
									<li class="breadcrumb-item" aria-current="page">Profile Settings</li>
								</ol>
							</nav>
						</div>
					</div>
				</div>
			</div>
			<!-- /Breadcrumb -->
			
			<!-- Page Content -->
			<div class="content">
				<div class="container">
					<div class="row">
										
						<div class="col-md-7 col-lg-8 col-xl-12">
							<div class="card">
								<div class="card-body">
									
									<!-- Profile Settings Form -->
									<form enctype="multipart/form-data" method="post" id="myForm">
										{% csrf_token %}
										<div class="row form-row">
											<!-- <div class="col-12 col-md-12">
												<div class="form-group">
													<div class="change-avatar">
														<div class="profile-img">
															<img src="{%static 'assets/img/patients/patient.jpg' %}" alt="User Image">
														</div>
														<div class="upload-img">
															<div class="change-photo-btn">
																<span><i class="fa fa-upload"></i> Upload Photo</span>
																<input type="file" class="upload">
															</div>
															<small class="form-text text-muted"></small>
														</div>
													</div>
												</div>
											</div> -->
											<div class="col-12 col-md-6">
												<div class="form-group">
													<label>User Id<span style="color: red;">*</span></label>
													<input type="text" name="user_id" value="{{data.user_id}}" id="user_id" class="form-control" disabled readonly>
												</div>
											</div>
											<div class="col-12 col-md-6">
												<div class="form-group">
													<label>First Name<span style="color: red;">*</span></label>
													<input type="text" value="{{data.first_name}}" id="first_name" class="form-control" oninput="this.value = this.value.replace(/[^a-z A-Z]/g, '')" disabled readonly>
												</div>
											</div>
											<div class="col-12 col-md-6">
												<div class="form-group">
													<label>Last Name<span style="color: red;">*</span></label>
													<input type="text" value="{{data.last_name}}" id="last_name" class="form-control" oninput="this.value = this.value.replace(/[^a-z A-Z]/g, '')" disabled readonly>
												</div>
											</div>
											

											<div class="col-12 col-md-6">
												<div class="form-group">
													<label>Date of Birth<span style="color: red;">*</span></label>
													<input type="date" class="form-control" value="{{data.dob}}" name="dob" id="dob" required onchange="calculateAge()">
												</div>
											</div>

											<div class="col-12 col-md-6">
											  <div class="form-group">
												<label>Age<span style="color: red;">*</span></label>
												<!-- <input type="number" class="form-control" id="age" name="age" min="0" value="{{data.age}}" readonly> -->
												<input type="number" class="form-control" id="age" name="age" min="0" value="{{data.age}}" readonly style="display: none;">

												<div id="ageError" style="color: red;"></div>
											  </div>
											</div>


											<div class="col-12 col-md-6">
												<div class="form-group">
													<label>Place of Birth<span style="color: red;">*</span></label>
													<input type="text" name="birth_place" value="{{data.birth_place}}" id="birth_place" class="form-control" oninput="this.value = this.value.replace(/[^a-z A-Z]/g, '')" required>
												</div>
												
											</div>

											<!-- <div class="col-12 col-md-6">
												<div class="form-group">
													<label>Birth Time<span style="color: red;">*(In 24Hrs)</span></label>
													<input type="time" name="birth_time" value="{{data.birth_time}}" id="birth_time" class="form-control" required>
												</div>
											</div> -->


											<div class="col-12 col-md-6">
												<div class="form-group d-flex">
													<div class="col-md-11">
														<label>Birth Time<span style="color: red;">*</span></label>
														<input type="text" name="birth_time" value="{{data.birth_time}}" id="birth_time" class="form-control clockpicker" required>
													</div>
													<div class="input-group-append mt-4">
														<span class="input-group-text p-2"><i class="icon1 far fa-clock p-1" id="show-time-picker"></i></span>
													  </div>
												</div>
											</div>
											
											<div class="col-12 col-md-6">
												<div class="form-group">
													<label>Email ID<span style="color: red;">*</span></label>
													<input type="email" name="email_id" value="{{data.email_id}}" id="email_id" class="form-control" required readonly>
												</div>
											</div>
											<div class="col-12 col-md-6">
												<div class="form-group">
													<label>Mobile<span style="color: red;">*</span></label>
													<input type="text" name="whatsapp_no" value="{{data.whatsapp_no}}" id="whatsapp_no" required class="form-control" maxlength="10" oninput="this.value = this.value.replace(/[^0-9]/g, '')" readonly>
												</div>
											</div>


											<!-- <div class="col-12 col-md-6">
												<div class="form-group">
													<label>Gender<span style="color: red;">*</span></label>
													<input type="text" id="gender" value="{{data.gender}}" name="gender" class="form-control" oninput="this.value = this.value.replace(/[^a-z A-Z]/g, '')" required>
												</div>
											</div> -->
											<div class="col-md-6">
											<div class="form-group">
			  								  <label>Gender<span class="text-danger">*</span></label>
											  <select class="form-select form-control" name="gender" id="gender" required>
												<option>Select</option>
												<option {% if data.gender == 'Male' %}selected{% endif %}>Male</option>
												<option {% if data.gender == 'Female' %}selected{% endif %}>Female</option>
												<option {% if data.gender == 'Prefer not to disclose' %}selected{% endif %}>Prefer not to disclose</option>
											  </select>
											</div>
										  </div>

											
											
											<div class="col-12 col-md-6">
												<div class="form-group">
													<label>City<span style="color: red;">*</span></label>
													<input type="text" name="city" id="city" value="{{data.city}}" class="form-control" oninput="this.value = this.value.replace(/[^a-z A-Z]/g, '')" required>
												</div>
											</div>
											<div class="col-12 col-md-6">
												<div class="form-group">
													<label>State<span style="color: red;">*</span></label>
													<input type="text" name="state" id="state" value="{{data.state}}" class="form-control" oninput="this.value = this.value.replace(/[^a-z A-Z]/g, '')" required>
												</div>
											</div>
											<div class="col-12 col-md-6">
												<div class="form-group">
													<label>Pin Code<span style="color: red;">*</span></label>
													<input type="number" name="pincode" value="{{data.pincode}}" id="pincode" class="form-control" oninput="this.value = this.value.replace(/[^0-9]/g, '')" required>
												</div>
											</div>
											<!-- <div class="col-12 col-md-6">
												<div class="form-group">
													<label>Country</label>
													<select class="countrypicker" name="country" value="{{data.country}}" id="country" required>
													<option disabled selected value>Select Country</option>
													</select>

												</div>
											</div>
										</div> -->
										<div class="col-12 col-md-6">
												<div class="form-group">
													<label>Country<span style="color: red;">*</span></label>
													<select class="countrypicker form-control" name="country" value="{{data.country}}" id="country" required>
													{% for country in countries %}
													<option value="{{ country.alpha_2 }}">{{ country.name }}</option>
													{% endfor %}
													<option disabled selected value>Select Country</option>
													</select>

												</div>
											</div>
										<div class="submit-section">
											<!-- <input type="submit" class="btn btn-primary submit-btn">Save Changes</button> -->
											<input type="submit" style="background-color: #00569d; color: #fff; " class="btn btn-primary submit-btn" value="Save" id="saveButton" onclick="submitForm()">
										</div>
									</form>
									<!-- /Profile Settings Form -->
									
								</div>
							</div>
						</div>
					</div>
				</div>

			</div>		
			<!-- /Page Content -->
		   
		</div>
		<!-- /Main Wrapper -->
	  
		<!-- jQuery -->
		<script src="{%static 'assets/js/jquery-3.6.4.min.js' %}"></script>


		<!-- <script> 
			flatpickr("#dob", {
			  dateFormat: "d-m-Y",
			  altInput: true,
			  altFormat: "d-m-Y",
			  allowInput: true,
			});
		  
		</script> -->

		<!-- <script> 
			flatpickr("#dob", {
			  dateFormat: "d-m-Y h:iK",
			  altInput: true,
			  altFormat: "d-m-Y h:iK",
			  allowInput: true,
			  enableTime: true,
			  noCalendar: false, 
			});
		  
		</script> -->
		<script>
			document.addEventListener("DOMContentLoaded", function () {
			const showTimePickerButton = document.getElementById("show-time-picker");
			const birthTimeInput = document.getElementById("birth_time");

			// Initialize the flatpickr instance
			const flatpickrInstance = flatpickr(birthTimeInput, {
				enableTime: true,
				noCalendar: true,
				dateFormat: "h:i K", // Format for time only
			});

			showTimePickerButton.addEventListener("click", function () {
				// Open the flatpickr time picker when the clock icon is clicked
				flatpickrInstance.open();
			});
			});

		  </script>
<!-- 
<script>
	function submitForm() {
		console.log("Submit button clickednnnnnnnnnnnnnnn"); 
		// Check if all required fields are filled
		var userId = document.getElementById("user_id").value;
		var firstName = document.getElementById("first_name").value;
		var lastName = document.getElementById("last_name").value;
		var dob = document.getElementById("dob").value;
		var age = document.getElementById("age").value;
		var birthPlace = document.getElementById("birth_place").value;
		var birthTime = document.getElementById("birth_time").value;
		var emailId = document.getElementById("email_id").value;
		var whatsappNo = document.getElementById("whatsapp_no").value;
		var gender = document.getElementById("gender").value;
		var city = document.getElementById("city").value;
		var state = document.getElementById("state").value;
		var pincode = document.getElementById("pincode").value;
		var country = document.getElementById("country").value;

		if (
			userId &&
			firstName &&
			lastName &&
			dob &&
			age &&
			birthPlace &&
			birthTime &&
			emailId &&
			whatsappNo &&
			gender !== "Select" &&
			city &&
			state &&
			pincode &&
			country
		) {
			// All required fields are filled, show a pop-up
			alert("The Profile Updated Successfully");
			// You can submit the form here if needed
			// document.getElementById("myForm").submit();
		} else {
			// Not all required fields are filled, show an error message
			alert("Please fill all the required fields.");
		}
	}
</script>


		 -->

		 <script>
			function submitForm(event) {
				console.log("Submit button clicked");
				event.preventDefault(); // Prevent the form from submitting
			
				// Check if all required fields are filled
				var userId = document.getElementById("user_id").value;
				var firstName = document.getElementById("first_name").value;
				var lastName = document.getElementById("last_name").value;
				var dob = document.getElementById("dob").value;
				var age = document.getElementById("age").value;
				var birthPlace = document.getElementById("birth_place").value;
				var birthTime = document.getElementById("birth_time").value;
				var emailId = document.getElementById("email_id").value;
				var whatsappNo = document.getElementById("whatsapp_no").value;
				var gender = document.getElementById("gender").value;
				var city = document.getElementById("city").value;
				var state = document.getElementById("state").value;
				var pincode = document.getElementById("pincode").value;
				var country = document.getElementById("country").value;
			
				var validGenders = ["Male", "Female", "Prefer not to disclose"];
			
				if (
					userId &&
					firstName &&
					lastName &&
					dob &&
					age &&
					birthPlace &&
					birthTime &&
					emailId &&
					whatsappNo &&
					(validGenders.includes(gender) || gender === "") && // Check if gender is valid or empty
					city &&
					state &&
					pincode &&
					country
				) {
					// All required fields are filled, show a pop-up
					alert("The Profile Updated Successfully");
					// You can submit the form here if needed
					document.getElementById("myForm").submit();
				} else {
					// Not all required fields are filled or gender is not valid, show an error message
					alert("Please fill all the required fields and select a valid gender.");
				}
			}
			
			document.getElementById("myForm").addEventListener("submit", submitForm);
			
			</script>
			
		


		<script>
			document.addEventListener("DOMContentLoaded", function() {
				var select = document.getElementById("country");
				var defaultOption = "IN"; // Country code for India
		
				for (var i = 0; i < select.options.length; i++) {
					if (select.options[i].value === defaultOption) {
						select.options[i].selected = true;
						break;
					}
				}
			});
		</script>

		<!-- jQuery -->
		<script src="{% static 'assets/js/jquery-3.6.4.min.js' %}"></script>
		
		<!-- Bootstrap Bundle JS -->
		<script src="{% static 'assets/js/bootstrap.bundle.min.js' %}"></script>


		<!-- Bootstrap Core JS -->
		<script src="{%static 'assets/js/bootstrap.bundle.min.js' %}"></script>
		
		<!-- Select2 JS -->
		<script src="{%static 'assets/plugins/select2/js/select2.min.js' %}"></script>
		
		<!-- Datetimepicker JS -->
		<script src="{%static 'assets/js/moment.min.js' %}"></script>
		<script src="{%static 'assets/js/bootstrap-datetimepicker.min.js' %}"></script>
		
		<!-- Sticky Sidebar JS -->
        <script src="{%static 'assets/plugins/theia-sticky-sidebar/ResizeSensor.js' %}"></script>
        <script src="{%static 'assets/plugins/theia-sticky-sidebar/theia-sticky-sidebar.js' %}"></script>
		
		<!-- Custom JS -->
		<script src="{%static 'assets/js/script.js' %}"></script>

		<!-- Profile Settings JS (dropdown)-->
		  <script src="{% static 'assets/js/profile-settings.js' %}"></script>

		  <!-- Select2 JS (dropdown)-->
		  <script src="{% static 'assets/plugins/select2/js/select2.min.js' %}"></script>
		  
		  <!-- Dropzone JS (dropdown)-->
		  <script src="{% static 'assets/plugins/dropzone/dropzone.min.js' %}"></script>


		<!-- for country -->
		<script src="//cdn.tutorialjinni.com/jquery/3.6.1/jquery.min.js"></script>
		<script src="//cdn.tutorialjinni.com/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
		<script src="//cdn.tutorialjinni.com/bootstrap-select/1.12.4/js/bootstrap-select.min.js"></script>
		<script src="//g.tutorialjinni.com/mojoaxel/bootstrap-select-country/dist/js/bootstrap-select-country.min.js"></script>

		<!-- script for age  -->
		<!-- <script>
				function calculateAge() {
				  var dobInput = document.getElementsByName("dob")[0];
				  var ageInput = document.getElementById("age");
				  var ageError = document.getElementById("ageError");
				  
				  if (!dobInput.value) {
					ageInput.value = "";
					ageError.textContent = "";
					return;
				  }
				
				  var dob = new Date(dobInput.value);
				  var today = new Date();
				  var age = today.getFullYear() - dob.getFullYear();
				
				  if (today.getMonth() < dob.getMonth() || (today.getMonth() == dob.getMonth() && today.getDate() < dob.getDate())) {
					age--;
				  }
				
				  ageInput.value = age;
				
				  if (age < 18) {
					ageError.textContent = "Age must be at least 18.";
				  } else {
					ageError.textContent = "";
				  }
				}
				</script>	 -->





<!--  -->

<script>
	// Function to calculate age and toggle the display of the age field
	function calculateAge() {
		var dobInput = document.getElementById("dob");
		var ageInput = document.getElementById("age");
		var ageError = document.getElementById("ageError");

		if (!dobInput.value) {
			ageInput.value = ""; // Clear the age field if no date is selected
			ageError.textContent = "";
			ageInput.style.display = "none"; // Hide the Age field
			return;
		}

		var dobDate = new Date(dobInput.value);
		var today = new Date();
		var age = today.getFullYear() - dobDate.getFullYear();

		if (
			today.getMonth() < dobDate.getMonth() ||
			(today.getMonth() === dobDate.getMonth() && today.getDate() < dobDate.getDate())
		) {
			age--;
		}

		ageInput.value = age;

		if (age < 18) {
			ageError.textContent = "Age must be at least 18.";
		} else {
			ageError.textContent = "";
		}
		
		ageInput.style.display = "block"; // Show the Age field
	}

	// Add an event listener to the Date of Birth field to trigger age calculation
	var dobInput = document.getElementById("dob");
	dobInput.addEventListener("change", calculateAge);

	// Initially hide the Age field when the page loads (if no date is selected)
	calculateAge();
</script>




				
				<!-- <script>
					function calculateAge() {
						console.log("calculateAge() function called");
					
						var dobInput = document.getElementById("dob");
						console.log("DOB Input Value: " + dobInput.value);
					
						var ageInput = document.getElementById("age");
						var ageError = document.getElementById("ageError");
					
						if (!dobInput.value) {
							ageInput.value = "";
							ageError.textContent = "";
							return;
						}
					
						var dobDate = new Date(dobInput.value); // Parse the input as a Date object
						var today = new Date();
						var age = today.getFullYear() - dobDate.getFullYear();
					
						// Check if the birthday for this year has not occurred yet
						if (
							today.getMonth() < dobDate.getMonth() ||
							(today.getMonth() === dobDate.getMonth() && today.getDate() < dobDate.getDate())
						) {
							age--;
						}
					
						ageInput.value = age;
					
						if (age < 18) {
							ageError.textContent = "Age must be at least 18.";
						} else {
							ageError.textContent = "";
						}
					
						console.log("Age calculated: " + age);
					}
					</script> -->
				<!-- <script>
					function validateAge() {
						// Get the age input field value
						var ageInput = document.getElementById('age');
						var age = parseInt(ageInput.value);
				
						// Check if the age is less than 18
						if (age < 18) {
							// Show the popup or alert
							alert('Age must be 18 or above.');
							// Prevent form submission
							return false;
						}
				
						// If age is valid, allow form submission
						return true;
					}
				</script> -->
		
	</body>
</html>
{% endblock %}